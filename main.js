(()=>{"use strict";var t="";const e=[{name:"Тихокеанский морж.",link:t+"667d2c58ff2318da877c.jpg"},{name:"Атлантический морж.",link:t+"f1dbd22ad385b8d1d695.jpg"},{name:"Лапетвый морж.",link:t+"90d6924f8719aa65b66b.jpg"},{name:"Новозеландский морж.",link:t+"3154c8270631a8ea85c2.jpg"},{name:"Капский морской кот.",link:t+"b38b782db9bd6a9d9660.jpg"},{name:"Фернандесский морской кот.",link:t+"0dc1087bfa3f410654ac.jpg"}],s=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),i=document.querySelector("#cardTemplate"),n=document.querySelector("#profileForm"),o=document.querySelector("#cardform");class a{constructor(t,e,s){this._photoCard=t,this._cardTemplate=e,this._openZoomPhoto=s}_defineCard(){this._card=this._cardTemplate.content.querySelector(".card").cloneNode(!0)}_defineCardElements(){this._cardHeading=this._card.querySelector(".card__info-title"),this._cardImage=this._card.querySelector(".cards__image"),this._deleteButtonCard=this._card.querySelector(".cards__delete-photo"),this._likeButton=this._card.querySelector(".card__info-heart")}_setCardElements(){this._cardHeading.textContent=this._photoCard.name,this._cardImage.setAttribute("src",this._photoCard.link),this._cardImage.setAttribute("alt",this._photoCard.name)}_handleLikeImageClick(){this._likeButton.classList.toggle("card__info-heart_active")}_handleDeleteButtonClick(){this._card.remove(),this._card=null}_handleOpenZoomClick(){this._openZoomPhoto(this._photoCard)}_addListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeImageClick()})),this._deleteButtonCard.addEventListener("click",(()=>{this._handleDeleteButtonClick()})),this._cardImage.addEventListener("click",(()=>{this._handleOpenZoomClick()}))}createCard(){return this._defineCard(),this._defineCardElements(),this._setCardElements(),this._addListeners(),this._card}}class l{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._textErrorClass=t.textErrorClass,this._errorClass=t.errorClass,this._form=e}_defineElements(){this._inputList=this._form.querySelectorAll(this._inputSelector),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(t,e,s){t.classList.add(this._errorClass),e.textContent=s}_hideInputError(t,e){t.classList.remove(this._errorClass),e.textContent=""}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_getErrorElement(t){return this._form.querySelector(`${this._textErrorClass}${t.name}`)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t,this._getErrorElement(t)):this._showInputError(t,this._getErrorElement(t),t.validationMessage)}_getInvalidInputs(){return 0===[...this._inputList].filter((t=>!t.validity.valid)).length}_toggleButton(){this._getInvalidInputs()?this._enableButton():this.disableButton()}_setEventListeners(){this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButton()}))}))}hideErrors(){this._inputList.forEach((t=>{this._hideInputError(t,this._getErrorElement(t))}))}enableValidation(){this._defineElements(),this._setEventListeners()}resetValidation(){this.hideErrors(),this.disableButton()}}class c{constructor(t){this._popup=document.querySelector(t)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popup.addEventListener("mousedown",(t=>{const e=e=>t.target.classList.contains(e);(e("popup_opened")||e("popup__close"))&&this.close()}))}}class _ extends c{constructor(t,e){super(t),this._submitFormCallback=e,this._form=this._popup.querySelector("form"),this._inputs=this._form.querySelectorAll("input")}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._inputs.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._submitFormCallback(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}}const d={};var u;u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",textErrorClass:".popup__input-error_type_",errorClass:"popup__input_error"},Array.from(document.querySelectorAll(u.formSelector)).forEach((t=>{const e=new l(u,t),s=t.getAttribute("name");d[s]=e,e.enableValidation()}));const h=new class extends c{constructor(t){super(t),this._title=this._popup.querySelector(".popup__title-zoom"),this._image=this._popup.querySelector(".popup__zoom")}open=({name:t,link:e})=>{this._title.textContent=t,this._image.alt=t,this._image.src=e,super.open()}}("#zoomfoto");h.setEventListeners();const p=new class{constructor({nameId:t,aboutId:e}){this._name=document.querySelector(t),this._about=document.querySelector(e)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo=(t,e)=>{this._name.textContent=t,this._about.textContent=e}}({nameId:".profile__name",aboutId:".profile__about"}),m=new class{constructor({items:t,renderer:e},s){this._items=t,this._renderer=e,this._container=document.querySelector(s)}renderElements(){this._items.forEach((t=>{this._container.append(this._renderer(t))}))}addItem(t){this._container.prepend(this._renderer(t))}}({items:e,renderer:function(t){return new a(t,i,h.open).createCard()}},".cards");m.renderElements();const E=new _("#cardADD",(function(t){const e={name:t.name,link:t.link};m.addItem(e)})),f=new _("#profileEdit",(function(t){p.setUserInfo(t.name,t.about)}));E.setEventListeners(),f.setEventListeners(),s.addEventListener("click",(()=>{f.open(),f.setInputValues(p.getUserInfo()),d[n.getAttribute("name")].resetValidation()})),r.addEventListener("click",(()=>{E.open(),d[o.getAttribute("name")].resetValidation()}))})();